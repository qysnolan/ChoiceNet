<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
          <div class="page-header">
		    <a href="/createAccount/" class="page-header-right btn"><i class="icon-plus"></i> Add account</a>
            <h1>View Accounts</h1>
        </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="span6" >
                <div class="search-box">
                    <label>
                        Search:
                        <input ng-model="search" type="text" class="input-large" placeholder="By Name or Group">
                    </label>
                </div>
            </div>
            <div class="span6">
                <pagination num-pages="totalPages" current-page="currentPage"
                    max-size="maxSize" boundary-links="true"
                    class="text-right"></pagination>
            </div>
            <table class="table table-striped table-bordered" id="userTable">
               <thead>
			      <tr>
				    <th ng-repeat="(i,th) in column_head" ng-click="changeSorting(i)">
                       <i ng-class="{'icon-user': i == 1, 'icon-group': i == 2, 'icon-time': i == 3}"></i> {{ th }}
                       <a  class="table-sorter">
                           <i ng-class="{'icon-sort-up':i==sort.column && sort.descending, 'icon-sort-down':i==sort.column && !sort.descending, 'icon-sort':i!=sort.column}"></i>
                       </a>
                   </th>
                   <th class="center"><i class="icon-cogs"></i> Options</th>
			      </tr>
		       </thead>

            <tbody>
                <tr ng-repeat="user in users">
                    <td>{{ user.last_name}}, {{ user.first_name }} </td>
                    <td><p ng-repeat="department in user.departments_names">{{ department }}</p></td>
                    <td>
                        <div ng-show="!isFirstLogin(user.last_login, user.date_joined)">
                            {{ user.last_login | date:'MMM dd, yyyy, HH:mm' }}
                        </div>

                        <div ng-show="isFirstLogin(user.last_login, user.date_joined)" class="italic">
                            Never
                        </div>
                    </td>
                    <td class="cell-center center">
                        <a href="/editAccount/{{ user.id }}/" class="btn btn-primary">Edit</a>
                        <button tooltip-placement="right" tooltip="Click to deactivate this account"
                                class="btn btn-success btn-activate prompt" ng-show="user.is_active"
                                ng-click="deactivate(user.id)"
                                data-prompt="Are you sure you want to deactivate this account?">
                             <i class="icon-unlock"></i> Activated
                        </button>
                        <button tooltip-placement="right" tooltip="Click to activate this account"
                                class="btn btn-danger" ng-show="!user.is_active"
                                ng-click="activate(user.id)">
                            <i class="icon-lock"></i> Deactivated
                        </button>
                    </td>

                </tr>
                <tr ng-show="count == undefined">
                    <td colspan="8" class="center">
                        <h1>
                            <i class="icon-refresh icon-large icon-spin"></i>
                            Loading accounts...
                        </h1>
                    </td>
                </tr>
                <tr ng-show="false"></tr>
                <tr ng-show="count == 0">
                    <td colspan="8" class="center">No accounts found</td>
                </tr>
		    </tbody>
            </table>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div class="span6">
                <p>
                   Showing {{ firstEntryOnCurrentPage }} to
                   {{ lastEntryOnCurrentPage }} of {{ count }} accounts
                 </p>
            </div>
            <div class="span6">
                <pagination num-pages="totalPages" current-page="currentPage"
                    boundary-links="true" class="text-right"></pagination>
            </div>

        </div>
    </div>
</div>
